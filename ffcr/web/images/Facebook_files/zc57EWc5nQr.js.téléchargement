if (self.CavalryLogger) { CavalryLogger.start_js(["0PMbo"]); }

__d("ReactComposerFunFactSinglePromptTaggerContainer.react",["cx","Arbiter","AsyncRequest","ReactComposerEvents","ReactComposerAttachmentStore","ReactComposerFunFactTaggerComponent.react","ReactComposerLoggingName","ReactComposerTaggerActions","ReactComposerTaggerHideOnEscapeKeyPress.react","ReactComposerTaggerStore","ReactComposerTaggerType","CurrentUser","FlexLayout.react","FluxContainer","ProfileEngagementTypedLogger","ProfileFunFactsEntryPoint","React","ReactComposerContextTypes","XProfileFunFactsSinglePromptFetchController","XUISpinner.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.$ReactComposerFunFactSinglePromptTaggerContainer1=null,this.$ReactComposerFunFactSinglePromptTaggerContainer4=function(){c("ReactComposerTaggerActions").setTaggerData(this.context.composerID,c("ReactComposerLoggingName").FUN_FACT,c("ReactComposerTaggerType").FUN_FACT,null)}.bind(this),m}k.getStores=function(){return[c("ReactComposerAttachmentStore"),c("ReactComposerTaggerStore")]};k.calculateState=function(l,m,n){var o=n.composerID,p=!!m.pinnedPromptID;return{isAttached:c("ReactComposerTaggerStore").hasData(o,c("ReactComposerTaggerType").FUN_FACT),isDisabled:c("ReactComposerTaggerStore").isDisabled(o,c("ReactComposerTaggerType").FUN_FACT),isLoading:l?l.isLoading:p,taggerData:c("ReactComposerTaggerStore").getTaggerData(o,c("ReactComposerTaggerType").FUN_FACT)}};k.prototype.componentDidMount=function(){c("Arbiter").inform("ReactComposerDialogLauncher/expandcomposer/"+this.context.composerID);if(this.props.pinnedPromptID)this.$ReactComposerFunFactSinglePromptTaggerContainer2()};k.prototype.componentDidUpdate=function(l,m){__p&&__p();if(!this.state.isAttached){this.$ReactComposerFunFactSinglePromptTaggerContainer1&&c("Arbiter").unsubscribe(this.$ReactComposerFunFactSinglePromptTaggerContainer1);return}var n=null,o=null;if(this.state.taggerData.promptID){n=this.state.taggerData.promptID;o="answer_post"}else{n=this.state.taggerData.askedPromptID;o="ask_post"}if(m.isAttached){var p=m.taggerData.promptID||m.taggerData.askedPromptID;if(p===n)return}this.$ReactComposerFunFactSinglePromptTaggerContainer3("enter",o,n,this.state.taggerData.entryPoint||this.props.entryPoint);this.$ReactComposerFunFactSinglePromptTaggerContainer1&&c("Arbiter").unsubscribe(this.$ReactComposerFunFactSinglePromptTaggerContainer1);this.$ReactComposerFunFactSinglePromptTaggerContainer1=c("Arbiter").subscribeOnce(c("ReactComposerEvents").POST_STARTED+this.context.composerID,function(){if(this.state.isAttached){var q=this.state.taggerData;this.$ReactComposerFunFactSinglePromptTaggerContainer3("create",q.promptID?"answer_post":"ask_post",q.promptID||q.askedPromptID,q.entryPoint||this.props.entryPoint)}}.bind(this))};k.prototype.$ReactComposerFunFactSinglePromptTaggerContainer3=function(l,m,n,o){var p=new(c("ProfileEngagementTypedLogger"))().setProductBucket("fun_facts").setProfileIDDummy(c("CurrentUser").getID()).setSurface("unknown").setEngagementType(l).setEventMetadata({entry_point:o,prompt_id:n});if(l==="create")p.setItemType(m).log();else if(l==="enter")p.setItemType("composer_page").setItemSubtype(m).log()};k.prototype.$ReactComposerFunFactSinglePromptTaggerContainer2=function(){c("ReactComposerTaggerActions").setTaggerData(this.context.composerID,c("ReactComposerLoggingName").FUN_FACT,c("ReactComposerTaggerType").FUN_FACT,{promptID:this.props.pinnedPromptID});var l=c("XProfileFunFactsSinglePromptFetchController").getURIBuilder().setInt("fetch_amount",1).setFBID("pinned_prompt_id",this.props.pinnedPromptID).getURI();new(c("AsyncRequest"))(l).setHandler(function(m){var n=this.state.taggerData;n.prompt=m.getPayload().prompts[0];c("ReactComposerTaggerActions").setTaggerData(this.context.composerID,c("ReactComposerLoggingName").FUN_FACT,c("ReactComposerTaggerType").FUN_FACT,n);this.setState({isLoading:false})}.bind(this)).send()};k.prototype.render=function(){if(!this.state.isAttached||this.state.isDisabled)return null;if(this.state.isLoading)return c("React").createElement(c("FlexLayout.react"),{align:"center",className:"_2ph_",direction:"vertical"},c("React").createElement(c("XUISpinner.react"),null));var l=this.state.taggerData.prompt;return c("React").createElement(c("ReactComposerTaggerHideOnEscapeKeyPress.react"),null,c("React").createElement(c("ReactComposerFunFactTaggerComponent.react"),{attribution:l.isCrowdsourced?l.attribution:null,emoji:l.emoji,onClose:this.$ReactComposerFunFactSinglePromptTaggerContainer4,showCloseButton:true,title:l.title}))};k.defaultProps={entryPoint:c("ProfileFunFactsEntryPoint").UNKNOWN};k.contextTypes=c("ReactComposerContextTypes");f.exports=c("FluxContainer").create(k,{withContext:true,withProps:true})}),null);
__d("XWebTypeaheadTimeBootstrapController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ajax/typeahead/time_bootstrap/",{increment:{type:"Int",defaultValue:5},start_offset:{type:"Int",defaultValue:0},offset:{type:"Int",defaultValue:0}})}),null);