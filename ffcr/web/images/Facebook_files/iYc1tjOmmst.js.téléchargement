if (self.CavalryLogger) { CavalryLogger.start_js(["STu0E"]); }

__d("EventGuestProfileShape",["EventReminderConstants","React"],(function a(b,c,d,e,f,g){var h=c("EventReminderConstants").EventGuestStates,i=c("EventReminderConstants").GuestStates,j=c("React").PropTypes,k={fbid:j.string,imageSrc:j.oneOfType([j.string,j.object]),guestState:j.oneOf([h.INITIAL,h.GOING,h.WATCHED,h.UNWATCHED,i.GOING,i.DECLINED,i.INVITED]).isRequired};f.exports=k}),null);
__d("EventGuestProfilePicWithBadge.react",["ix","cx","EventGuestProfileShape","EventReminderConstants","Image.react","React","fbglyph"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("EventReminderConstants").EventGuestStates,m=c("EventReminderConstants").GuestStates,n=c("React").PropTypes,o=2,p=h("114568"),q=h("114707"),r=h("115598");j=babelHelpers.inherits(s,c("React").Component);k=j&&j.prototype;s.prototype.render=function(){__p&&__p();var t=this.props,u=t.badgeSize,v=t.imageSize,w=t.profile,x=c("React").createElement(c("Image.react"),{className:"_3vnr",height:v,width:v,src:w.imageSrc}),y={marginLeft:-u+"px",marginTop:v+2*o-u+"px"},z=null;if(w.guestState===m.GOING)z=c("React").createElement(c("Image.react"),{className:"_3vns",style:y,src:p});else if(w.guestState===m.DECLINED)z=c("React").createElement(c("Image.react"),{className:"_3vnt",style:y,src:q});else if(w.guestState===l.GOING)z=c("React").createElement(c("Image.react"),{className:"_62kp",style:y,src:p});else if(w.guestState===l.WATCHED)z=c("React").createElement(c("Image.react"),{className:"_62kq",style:y,src:r});return c("React").createElement("div",{className:this.props.className},x,z)};function s(){j.apply(this,arguments)}s.defaultProps={badgeSize:16,imageSize:32};s.propTypes={badgeSize:n.number,className:n.string,eventType:n.string,imageSize:n.number,profile:n.shape(c("EventGuestProfileShape")).isRequired};f.exports=s}),null);
__d("EventRSVPFacepile.react",["cx","EventGuestProfilePicWithBadge.react","EventGuestProfileShape","React","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.profiles.map(function(n,o){return c("React").createElement(c("EventGuestProfilePicWithBadge.react"),{badgeSize:this.props.badgeSize,className:"_4sju",eventType:this.props.eventType,imageSize:this.props.faceSize,key:o+n.fbid,profile:n})}.bind(this));return c("React").createElement("div",{className:c("joinClasses")("_4sjv",this.props.className)},m)};function l(){i.apply(this,arguments)}l.defaultProps={badgeSize:16,faceSize:32};l.propTypes={badgeSize:k.number,className:k.string,eventType:k.string,faceSize:k.number,profiles:k.arrayOf(k.shape(c("EventGuestProfileShape"))).isRequired};f.exports=l}),null);
__d("EventResponseButtons.react",["cx","fbt","EventReminderConstants","React","XUIButton.react","XUISingleSelector.react","XUISpinner.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("XUISingleSelector.react").Option,m=c("EventReminderConstants").EventGuestStates,n=c("EventReminderConstants").EventPlanType,o=c("EventReminderConstants").GuestStates;j=babelHelpers.inherits(p,c("React").Component);k=j&&j.prototype;function p(){__p&&__p();var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=k.constructor).call.apply(q,[this].concat(t)),this.state={showSpinner:false,prevGuestState:""},this.$EventResponseButtons6=function(){this.setState({showSpinner:true,prevGuestState:this.props.guestState});this.props.onResponseClick(o.DECLINED)}.bind(this),this.$EventResponseButtons7=function(){this.setState({showSpinner:true,prevGuestState:this.props.guestState});this.props.onResponseClick(o.GOING)}.bind(this),this.$EventResponseButtons9=function(v){this.setState({showSpinner:true,prevGuestState:this.props.guestState});this.props.onResponseClick(v.value)}.bind(this),r}p.prototype.render=function(){if(this.state.showSpinner)return this.$EventResponseButtons1();else if(this.props.eventType===n.ASSOCIATED_EVENT)return this.props.guestState===m.INITIAL?this.$EventResponseButtons2():this.$EventResponseButtons3();else return this.props.guestState===o.INVITED?this.$EventResponseButtons4():this.$EventResponseButtons5()};p.prototype.$EventResponseButtons1=function(){var q=this.state.prevGuestState===m.INITIAL||this.state.prevGuestState===o.INVITED?"_164q":"_164s";return c("React").createElement(c("XUISpinner.react"),{className:q,size:"small"})};p.prototype.$EventResponseButtons4=function(){return c("React").createElement("div",{className:"_26lz"},c("React").createElement(c("XUIButton.react"),{className:"_26l-",label:i._("Je n\u2019y vais pas"),onClick:this.$EventResponseButtons6,size:this.props.size}),c("React").createElement(c("XUIButton.react"),{className:"_26l_",label:i._("Participe"),onClick:this.$EventResponseButtons7,size:this.props.size}))};p.prototype.$EventResponseButtons2=function(){return c("React").createElement("div",{className:"_26lz"},c("React").createElement(c("XUIButton.react"),{className:"_2w2a",label:i._("Participe"),onClick:function(){return this.$EventResponseButtons8(m.GOING)}.bind(this),size:this.props.size}),c("React").createElement(c("XUIButton.react"),{className:"_2w2a",label:i._("Int\u00e9ress\u00e9(e)"),onClick:function(){return this.$EventResponseButtons8(m.WATCHED)}.bind(this),size:this.props.size}),c("React").createElement(c("XUIButton.react"),{className:"_2w2a",label:i._("Je n\u2019y vais pas"),onClick:function(){return this.$EventResponseButtons8(m.UNWATCHED)}.bind(this),size:this.props.size}))};p.prototype.$EventResponseButtons8=function(q){this.setState({showSpinner:true,prevGuestState:this.props.guestState});this.props.onResponseClick(q)};p.prototype.$EventResponseButtons5=function(){return c("React").createElement(c("XUISingleSelector.react"),{onChange:this.$EventResponseButtons9,value:this.props.guestState,size:this.props.size},c("React").createElement(l,{value:o.GOING,label:i._("Participe")}),c("React").createElement(l,{value:o.DECLINED,label:i._("Je n\u2019y vais pas")}))};p.prototype.$EventResponseButtons3=function(){return c("React").createElement(c("XUISingleSelector.react"),{onChange:this.$EventResponseButtons9,value:this.props.guestState,size:this.props.size},c("React").createElement(l,{value:m.GOING,label:i._("Participe")}),c("React").createElement(l,{value:m.WATCHED,label:i._("Int\u00e9ress\u00e9(e)")}),c("React").createElement(l,{value:m.UNWATCHED,label:i._("Je n\u2019y vais pas")}))};f.exports=p}),null);
__d("EventPlanStrings",["fbt","formatDate"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=" \xb7 ",j={getStartPlanFBT:function k(){return h._("Commencer un projet")},getLoadingPlanFBT:function k(){return h._("Chargement...")},getDisplayDateAndTimeFBT:function k(l,m){var n=c("formatDate")(l,"g:iA"),o=n.length-5;if(n.substring(o,o+3)===":00")n=n.substring(0,o).concat(n.substring(o+3));var p=h._("{reminder_date}, \u00e0 {reminder_time}",[h.param("reminder_date",c("formatDate")(l,"D M j")),h.param("reminder_time",n)]);if(m)return h._("{reminder_date_and_time}{middot_separator_for_time_and_name}{reminder_name}",[h.param("reminder_date_and_time",p),h.param("middot_separator_for_time_and_name",i),h.param("reminder_name",m)]);else return p},getSubtitle:function k(l,m,n){var o=h._({"*":"{number} participeront","_1":"1 participant"},[h.plural(l,"number")]),p=void 0;if(m)if(n)p=h._("{reminder_location_name}{middot_separator_for_location_and_going_members}{going_member_count}",[h.param("reminder_location_name",m),h.param("middot_separator_for_location_and_going_members",i),h.param("going_member_count",o)]);else p=m;else p=o;return p},getViewEventFBT:function k(){return h._("Voir l\u2019\u00e9v\u00e8nement")},getRSVPContext:function k(l){return h._({"*":"{number} participeront","_1":"1 participant"},[h.plural(l,"number")])},getAssociatedEventRSVPContext:function k(l,m){return h._("{going_member_count} participent {middot_separator_for_going_and_interested_members}{interested_member_count} sont int\u00e9ress\u00e9s",[h.param("going_member_count",l),h.param("middot_separator_for_going_and_interested_members",i),h.param("interested_member_count",m)])},getAssociatedEventRSVPContextAsSubtitle:function k(l,m){return h._("\u00c9v\u00e8nement public {middot_separator_for_event_name_and_going_members}{going_member_count} Participe {middot_separator_for_going_and_interested_members}{interested_member_count} Int\u00e9ress\u00e9(e)",[h.param("middot_separator_for_event_name_and_going_members",i),h.param("going_member_count",l),h.param("middot_separator_for_going_and_interested_members",i),h.param("interested_member_count",m)])}};f.exports=j}),null);
__d("EventReminderActionsLogger",["EventsActionsLogger"],(function a(b,c,d,e,f,g){f.exports={logTriggerOnTriggerCTA:function h(){c("EventsActionsLogger").log(null,{type:c("EventsActionsLogger").Type.TRIGGER,target:c("EventsActionsLogger").Target.TRIGGER_CTA,acontext:{action_history:[{surface:c("EventsActionsLogger").Surface.MESSENGER_CHAT_TAB,mechanism:c("EventsActionsLogger").Mechanism.REMINDER_WORD}]}})},logViewOnChatTabSheet:function h(i){c("EventsActionsLogger").log(i,{type:c("EventsActionsLogger").Type.VIEW,target:c("EventsActionsLogger").Target.REMINDER_BANNER,acontext:{action_history:[{surface:c("EventsActionsLogger").Surface.MESSENGER_CHAT_TAB,mechanism:c("EventsActionsLogger").Mechanism.REMINDER_BANNER}]}})},logViewOnTriggerWord:function h(){c("EventsActionsLogger").log(null,{type:c("EventsActionsLogger").Type.VIEW,target:c("EventsActionsLogger").Target.TRIGGER_WORD,acontext:{action_history:[{surface:c("EventsActionsLogger").Surface.MESSENGER_CHAT_TAB,mechanism:c("EventsActionsLogger").Mechanism.REMINDER_WORD}]}})},logViewOnTriggerCTA:function h(){c("EventsActionsLogger").log(null,{type:c("EventsActionsLogger").Type.VIEW,target:c("EventsActionsLogger").Target.TRIGGER_CTA,acontext:{action_history:[{surface:c("EventsActionsLogger").Surface.MESSENGER_CHAT_TAB,mechanism:c("EventsActionsLogger").Mechanism.REMINDER_WORD}]}})},logClickOnChatTabSheet:function h(i){c("EventsActionsLogger").log(i,{type:c("EventsActionsLogger").Type.CLICK,target:c("EventsActionsLogger").Target.REMINDER_BANNER,acontext:{action_history:[{surface:c("EventsActionsLogger").Surface.MESSENGER_CHAT_TAB,mechanism:c("EventsActionsLogger").Mechanism.REMINDER_BANNER}]}})},logClickOnEntryPoint:function h(){c("EventsActionsLogger").log(null,{type:c("EventsActionsLogger").Type.CLICK,target:c("EventsActionsLogger").Target.REMINDER_ENTRYPOINT,acontext:{action_history:[{surface:c("EventsActionsLogger").Surface.MESSENGER_CHAT_TAB,mechanism:c("EventsActionsLogger").Mechanism.MESSENGER_COMPOSER}]}})},logClickOnTriggerWord:function h(){c("EventsActionsLogger").log(null,{type:c("EventsActionsLogger").Type.CLICK,target:c("EventsActionsLogger").Target.TRIGGER_WORD,acontext:{action_history:[{surface:c("EventsActionsLogger").Surface.MESSENGER_CHAT_TAB,mechanism:c("EventsActionsLogger").Mechanism.REMINDER_WORD}]}})},logClickOnTriggerCTA:function h(){c("EventsActionsLogger").log(null,{type:c("EventsActionsLogger").Type.CLICK,target:c("EventsActionsLogger").Target.TRIGGER_CTA,acontext:{action_history:[{surface:c("EventsActionsLogger").Surface.MESSENGER_CHAT_TAB,mechanism:c("EventsActionsLogger").Mechanism.REMINDER_WORD}]}})}}}),null);
__d("ChatEventReminderFlyout.react",["cx","fbt","DateConsts","EventGuestProfileShape","EventPlanStrings","EventReminderConstants","EventReminderStateStore","EventRemindersGating","EventResponseButtons.react","EventRSVPFacepile.react","LayerHideOnBlur","ContextualLayerHideOnScroll","LightweightEventDateTimePicker.react","LightweightEventLocationRow.react","LightweightEventType","Link.react","MercuryIDs","MercuryParticipants","React","ScrollableArea.react","XUIButton.react","XUIContextualDialog.react","XUIContextualDialogBody.react","XUIContextualDialogFooter.react","XUIContextualDialogTitle.react","XUISpinner.react","XUITextInput.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m=c("EventReminderConstants").EventGuestStates,n=c("EventReminderConstants").EventPlanType,o=c("EventReminderConstants").GuestStates,p=266,q="https://www.facebook.com/events/",r=122;j=babelHelpers.inherits(s,c("React").Component);k=j&&j.prototype;s.prototype.focusInput=function(){this.refs.event_title&&this.refs.event_title.focusInput()};s.prototype.componentDidMount=function(){this.focusInput()};s.prototype.render=function(){return c("React").createElement(c("XUIContextualDialog.react"),babelHelpers["extends"]({width:p,behaviors:{LayerHideOnBlur:c("LayerHideOnBlur"),LayerHideOnScroll:c("ContextualLayerHideOnScroll")},hideOnEscape:true},this.props.dialogProps),c("React").createElement("div",{className:"_2l1g"},c("React").createElement(c("XUIContextualDialogTitle.react"),{className:"_2l1h"},c("React").createElement("span",{className:"_2l1i"},this.$ChatEventReminderFlyout1())),c("React").createElement(c("XUIContextualDialogBody.react"),{className:"_2l1j"},this.$ChatEventReminderFlyout2(),this.$ChatEventReminderFlyout3(),this.$ChatEventReminderFlyout4(),this.$ChatEventReminderFlyout5()),c("React").createElement(c("XUIContextualDialogFooter.react"),null,this.$ChatEventReminderFlyout6(),c("React").createElement(c("XUIButton.react"),{label:this.$ChatEventReminderFlyout7(),use:"confirm",onClick:this.props.onCreateOrChangeEvent}))))};s.prototype.$ChatEventReminderFlyout2=function(){if(this.props.eventType===n.ASSOCIATED_EVENT)return c("React").createElement("div",{className:"_2l1l"},c("React").createElement("div",{className:"_2pi8 _2pi2"},c("EventPlanStrings").getDisplayDateAndTimeFBT(this.props.eventDate/c("DateConsts").MS_PER_SEC)));return c("React").createElement("div",{className:"_2l1l"},c("React").createElement(c("LightweightEventDateTimePicker.react"),{initialDateTime:this.props.eventDate,onDateTimeChange:this.props.onDateTimeChange}))};s.prototype.$ChatEventReminderFlyout3=function(){if(this.props.eventType===n.ASSOCIATED_EVENT){var t=q+this.props.eventID;return c("React").createElement("div",{className:"_2l1l"},c("React").createElement("div",{className:"_2pi8"},this.props.eventName),c("React").createElement(c("Link.react"),{className:"_2pi8",href:t},c("EventPlanStrings").getViewEventFBT()))}return c("React").createElement("div",{className:"_2l1l"},c("React").createElement(c("XUITextInput.react"),{className:"autofocus _2l1n","aria-label":i._("Nom de l\u2019\u00e9v\u00e8nement"),placeholder:i._("Nom"),ref:"event_title",value:this.props.eventName,onChange:this.props.onNameChange}))};s.prototype.$ChatEventReminderFlyout4=function(){if(this.props.eventType===c("LightweightEventType").CALL||this.props.eventType===c("LightweightEventType").DIRECT_M||this.props.eventType===n.ASSOCIATED_EVENT&&this.props.eventLocationName===null)return null;return c("React").createElement("div",{className:"_2l1l"},c("React").createElement(c("LightweightEventLocationRow.react"),{disabled:this.props.eventType===n.ASSOCIATED_EVENT,initialLocationName:this.props.eventLocationName,initialLocationAddress:this.props.eventLocationAddress,onLocationChange:this.props.onLocationChange,onLocationSelect:this.props.onLocationSelect}))};s.prototype.$ChatEventReminderFlyout5=function(){var t=this.props.eventMembers;if(!this.props.isEditing||this.props.eventType!==n.ASSOCIATED_EVENT&&this.props.eventType!==c("LightweightEventType").EVENT||!t||!this.$ChatEventReminderFlyout8())return null;if(!c("EventReminderStateStore").getProfileImagesLoaded(this.props.threadID))return c("React").createElement("div",{className:"_nbm"},c("React").createElement("div",{className:"_2ph-"},c("React").createElement(c("XUISpinner.react"),{size:"large"})));return c("React").createElement("div",{className:"_2l1l"},c("React").createElement("div",{className:"_pyv"},this.props.eventType===n.ASSOCIATED_EVENT?c("EventPlanStrings").getAssociatedEventRSVPContext(this.props.numOfGoingMembers,this.props.numOfInterestedMembers):c("EventPlanStrings").getRSVPContext(this.props.numOfGoingMembers)),c("React").createElement(c("ScrollableArea.react"),{className:"_pyw",maxHeight:r},c("React").createElement(c("EventRSVPFacepile.react"),{eventType:this.props.eventType,profiles:t})),c("React").createElement("div",{className:"_2m6x"},c("React").createElement(c("EventResponseButtons.react"),{eventType:this.props.eventType,guestState:this.props.selfGuestState,onResponseClick:this.props.onSelfGuestStateChange,size:"medium"})))};s.prototype.$ChatEventReminderFlyout6=function(){if(!this.props.isEditing||this.props.eventType===n.ASSOCIATED_EVENT)return null;var t=this.$ChatEventReminderFlyout9()?i._("Supprimer le plan"):i._("Supprimer");return c("React").createElement(c("Link.react"),{className:"_2l1p",onClick:this.props.onDeleteEvent},t)};s.prototype.$ChatEventReminderFlyout1=function(){if(this.props.eventType===c("LightweightEventType").CALL)return i._("M\u00e9mo d\u2019appel");else if(this.props.eventType===n.ASSOCIATED_EVENT)return i._("D\u00e9tails de l\u2019\u00e9v\u00e8nement");return this.$ChatEventReminderFlyout9()?i._("Projet"):i._("Rappel d\u2019\u00e9v\u00e8nement")};s.prototype.$ChatEventReminderFlyout7=function(){if(this.props.isEditing)return this.$ChatEventReminderFlyout9()?i._("Termin\u00e9"):i._("D\u00e9finir");else return this.$ChatEventReminderFlyout9()?i._("Cr\u00e9er un programme"):i._("Cr\u00e9er")};s.prototype.$ChatEventReminderFlyout8=function(){return c("EventRemindersGating").isRSVPAllowed};s.prototype.$ChatEventReminderFlyout9=function(){return c("EventRemindersGating").shouldUseNewName};function s(){j.apply(this,arguments)}s.propTypes={isEditing:l.bool.isRequired,eventID:l.string.isRequired,eventType:l.oneOf([n.ASSOCIATED_EVENT,c("LightweightEventType").CALL,c("LightweightEventType").DIRECT_M,c("LightweightEventType").EVENT]),eventDate:l.number.isRequired,eventName:l.string,eventLocationName:l.string,eventLocationAddress:l.string,eventMembers:l.arrayOf(l.shape(c("EventGuestProfileShape")).isRequired),numOfGoingMembers:l.number,numOfInterestedMembers:l.number,selfGuestState:l.oneOf([m.INITIAL,m.GOING,m.WATCHED,m.UNWATCHED,o.GOING,o.DECLINED,o.INVITED]),onCreateOrChangeEvent:l.func.isRequired,onDeleteEvent:l.func.isRequired,onDateTimeChange:l.func.isRequired,onNameChange:l.func.isRequired,onLocationChange:l.func.isRequired,onLocationSelect:l.func.isRequired,onSelfGuestStateChange:l.func.isRequired,dialogProps:l.object,threadID:l.string};f.exports=s}),null);
__d("ChatEventReminderTabSheet.react",["ix","cx","fbt","ChatEventReminderFlyout.react","EventGuestProfileShape","EventPlanStrings","EventReminderActionsLogger","EventReminderConstants","EventRemindersGating","Image.react","LightweightEventType","React","ReactDOM","XUIButton.react","fbglyph"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("EventReminderConstants").EventGuestStates,n=c("EventReminderConstants").EventPlanType,o=c("EventReminderConstants").GuestStates,p=c("React").PropTypes,q=266;k=babelHelpers.inherits(r,c("React").Component);l=k&&k.prototype;r.prototype.componentDidMount=function(){c("EventReminderActionsLogger").logViewOnChatTabSheet(this.props.eventID)};r.prototype.render=function(){return c("React").createElement("div",{onClick:this.props.handleClick,ref:"banner",role:"button",tabIndex:"0"},c("React").createElement("div",{tabIndex:0,className:"_4cu7"},c("React").createElement("div",null,c("React").createElement("span",{className:"_4r4s"},this.$ChatEventReminderTabSheet1()),this.props.eventType===n.ASSOCIATED_EVENT?null:c("React").createElement(c("Image.react"),{className:"_4cu8",src:h("113739")})),this.$ChatEventReminderTabSheet2(),this.$ChatEventReminderTabSheet3()),this.$ChatEventReminderTabSheet4())};r.prototype.$ChatEventReminderTabSheet4=function(){if(!this.props.flyoutShown)return null;var s="left",t=c("ReactDOM").findDOMNode(this.refs.banner);if(t&&t instanceof Element&&t.getBoundingClientRect().left<q)s="right";var u={alignment:"left",position:s,contextRef:function(){return this.refs.banner}.bind(this),onToggle:this.props.onToggle,shown:this.props.flyoutShown};return c("React").createElement(c("ChatEventReminderFlyout.react"),{isEditing:true,eventID:this.props.eventID,eventType:this.props.eventType,eventDate:this.props.flyoutEventDate,eventName:this.props.flyoutEventName,eventLocationName:this.props.flyoutEventLocationName,eventLocationAddress:this.props.flyoutEventLocationAddress,eventMembers:this.props.eventMembers,numOfGoingMembers:this.props.numOfGoingMembers,numOfInterestedMembers:this.props.numOfInterestedMembers,selfGuestState:this.props.selfGuestState,onDateTimeChange:this.props.onDateTimeChange,onNameChange:this.props.onNameChange,onLocationChange:this.props.onLocationChange,onLocationSelect:this.props.onLocationSelect,onSelfGuestStateChange:this.props.onSelfGuestStateChange,onCreateOrChangeEvent:this.props.onCreateOrChangeEvent,onDeleteEvent:this.props.onDeleteEvent,dialogProps:u,threadID:this.props.threadID})};r.prototype.$ChatEventReminderTabSheet1=function(){if(!this.props.isEventLoaded)return c("EventPlanStrings").getLoadingPlanFBT();else return c("EventPlanStrings").getDisplayDateAndTimeFBT(this.props.eventDate,this.props.eventName)};r.prototype.$ChatEventReminderTabSheet2=function(){var s=this.$ChatEventReminderTabSheet5();if(!this.props.eventLocationName&&!s)return null;if(this.props.selfGuestState===o.INVITED&&this.$ChatEventReminderTabSheet5())return this.$ChatEventReminderTabSheet6();if(this.props.numOfGoingMembers+this.props.numOfInterestedMembers<=0)return null;var t=this.props.eventType===n.ASSOCIATED_EVENT?c("EventPlanStrings").getAssociatedEventRSVPContextAsSubtitle(this.props.numOfGoingMembers,this.props.numOfInterestedMembers):c("EventPlanStrings").getSubtitle(this.props.numOfGoingMembers,this.props.eventLocationName,s);return c("React").createElement("div",{className:"_47d1"},t)};r.prototype.$ChatEventReminderTabSheet3=function(){if(this.props.eventType!==n.ASSOCIATED_EVENT||this.props.selfGuestState!==m.INITIAL)return null;return c("React").createElement("div",{className:"_4qxr"},c("React").createElement(c("XUIButton.react"),{label:j._("Participe"),onClick:function(event){event.stopPropagation();this.props.onSelfGuestStateChange(m.GOING)}.bind(this),size:"small"}),c("React").createElement(c("XUIButton.react"),{label:j._("Int\u00e9ress\u00e9(e)"),onClick:function(event){event.stopPropagation();this.props.onSelfGuestStateChange(m.WATCHED)}.bind(this),size:"small"}),c("React").createElement(c("XUIButton.react"),{label:j._("Je n\u2019y vais pas"),onClick:function(event){event.stopPropagation();this.props.onSelfGuestStateChange(m.UNWATCHED)}.bind(this),size:"small"}))};r.prototype.$ChatEventReminderTabSheet6=function(){return c("React").createElement("div",{className:"_4qxr"},c("React").createElement(c("XUIButton.react"),{className:"_4qxu",label:j._("Je n\u2019y vais pas"),onClick:function(event){event.stopPropagation();this.props.onSelfGuestStateChange(o.DECLINED)}.bind(this),size:"small"}),c("React").createElement(c("XUIButton.react"),{className:"_4qxv",label:j._("Participe"),onClick:function(event){event.stopPropagation();this.props.onSelfGuestStateChange(o.GOING)}.bind(this),size:"small"}))};r.prototype.$ChatEventReminderTabSheet5=function(){return this.props.allowRSVP&&c("EventRemindersGating").isRSVPAllowed};function r(){k.apply(this,arguments)}r.propTypes={eventName:p.string,eventDate:p.number.isRequired,eventLocationName:p.string,eventMembers:p.arrayOf(p.shape(c("EventGuestProfileShape")).isRequired),allowRSVP:p.bool.isRequired,numOfGoingMembers:p.number,numOfInterestedMembers:p.number,selfGuestState:p.oneOf([m.INITIAL,m.GOING,m.WATCHED,m.UNWATCHED,o.GOING,o.DECLINED,o.INVITED]),flyoutEventDate:p.number.isRequired,flyoutEventName:p.string,flyoutEventLocationName:p.string,flyoutEventLocationAddress:p.string,eventID:p.string.isRequired,eventType:p.oneOf([n.ASSOCIATED_EVENT,c("LightweightEventType").CALL,c("LightweightEventType").DIRECT_M,c("LightweightEventType").EVENT]),flyoutShown:p.bool.isRequired,handleClick:p.func.isRequired,onToggle:p.func.isRequired,onCreateOrChangeEvent:p.func.isRequired,onDeleteEvent:p.func.isRequired,onDateTimeChange:p.func.isRequired,onNameChange:p.func.isRequired,onLocationChange:p.func.isRequired,onLocationSelect:p.func.isRequired,onSelfGuestStateChange:p.func.isRequired,isEventLoaded:p.bool,threadID:p.string};f.exports=r}),null);
__d("XEditEventReminderController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ajax/eventreminder/submit/",{acontext:{type:"String",required:true},event_reminder_id:{type:"Int",required:true},title:{type:"String"},date:{type:"Int"},location_id:{type:"String"},location_name:{type:"String"},"delete":{type:"Bool",defaultValue:false}})}),null);
__d("XEventRSVPController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ajax/event/rsvp/",{acontext:{type:"String",required:true},event_id:{type:"Int",required:true},guest_state:{type:"String",required:true}})}),null);
__d("XEventReminderRSVPController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ajax/eventreminder/rsvp/",{acontext:{type:"String",required:true},event_reminder_id:{type:"Int",required:true},guest_state:{type:"Enum",required:true,enumType:1}})}),null);
__d("ChatEventReminderContainer.react",["AsyncRequest","ChatEventReminderFlyout.react","ChatEventReminderTabSheet.react","EventPlanTimeHelper","EventReminderActions","EventReminderActionsLogger","EventReminderConstants","EventReminderRequestHelper","EventReminderStateStore","FBJSON","FluxContainer","LightweightEventType","MercuryIDs","React","SimpleXUIDialog","XCreateEventReminderController","XEditEventReminderController","XEventRSVPController","XEventReminderRSVPController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").Component,k=c("EventReminderConstants").EventPlanType,l=c("EventReminderConstants").GuestStates,m=c("EventReminderConstants").TimeErrorType,n=1e3,o=3600;h=babelHelpers.inherits(p,j);i=h&&h.prototype;function p(q){__p&&__p();i.constructor.call(this,q);this.$ChatEventReminderContainer9=function(r){if(r!==this.state.flyoutShown)this.setState({flyoutShown:r})}.bind(this);this.$ChatEventReminderContainer8=function(){var r=this.state.eventID;c("EventReminderActionsLogger").logClickOnChatTabSheet(r);if(this.state.eventType===k.ASSOCIATED_EVENT)this.$ChatEventReminderContainer9(!this.state.flyoutShown);else if(!this.state.flyoutShown)c("EventReminderRequestHelper").fetchEventReminder(this.props.threadID,r,function(){this.$ChatEventReminderContainer9(true)}.bind(this));else this.$ChatEventReminderContainer9(false)}.bind(this);this.$ChatEventReminderContainer1=function(r,s){this.setState({flyoutEventDate:r,showTimeError:s})}.bind(this);this.$ChatEventReminderContainer2=function(event){this.setState({flyoutEventName:event.target.value})}.bind(this);this.$ChatEventReminderContainer3=function(r){this.setState({flyoutEventLocationID:"",flyoutEventLocationName:r,flyoutEventLocationAddress:""})}.bind(this);this.$ChatEventReminderContainer4=function(r,s,t){this.setState({flyoutEventLocationID:r,flyoutEventLocationName:s,flyoutEventLocationAddress:t})}.bind(this);this.$ChatEventReminderContainer5=function(r){__p&&__p();var s=this.state.selfGuestState;this.setState({selfGuestState:r});if(this.state.eventType===k.ASSOCIATED_EVENT){var t=c("XEventRSVPController").getURIBuilder().setInt("event_id",this.state.eventID).setString("guest_state",r).setString("acontext",c("FBJSON").stringify(this.props.actionContext));new(c("AsyncRequest"))(t.getURI()).setHandler(function(v){if(v.payload)this.$ChatEventReminderContainer9(false);if(v.payload.error){c("SimpleXUIDialog").show(v.payload.error);this.setState({selfGuestState:s})}}.bind(this)).send();return}var u=c("XEventReminderRSVPController").getURIBuilder().setInt("event_reminder_id",this.state.eventID).setEnum("guest_state",r).setString("acontext",c("FBJSON").stringify(this.props.actionContext));new(c("AsyncRequest"))(u.getURI()).setHandler(function(v){this.$ChatEventReminderContainer9(false)}.bind(this)).send()}.bind(this);this.$ChatEventReminderContainer7=function(){this.$ChatEventReminderContainer9(false);if(this.state.showTimeError!==m.NO_ERROR||this.state.eventType===k.ASSOCIATED_EVENT)return;if(this.props.isEditing)this.$ChatEventReminderContainer10();else this.$ChatEventReminderContainer11()}.bind(this);this.$ChatEventReminderContainer6=function(){var r=this.state.eventID,s=c("XEditEventReminderController").getURIBuilder().setInt("event_reminder_id",r).setBool("delete",true).setString("acontext",c("FBJSON").stringify(this.props.actionContext));new(c("AsyncRequest"))(s.getURI()).setHandler(function(t){if(t.payload){if(this.props.dialogProps&&this.props.dialogProps.onToggle)this.props.dialogProps.onToggle(false);c("EventReminderActions").deleteEventReminder(this.props.threadID)}}.bind(this)).send()}.bind(this)}p.getStores=function(q){return[c("EventReminderStateStore")]};p.calculateState=function(q,r){var event=c("EventReminderStateStore").getEvent(r.threadID);if(!r.isEditing||!event||!event.exists)return this.getDefaultState(r);var s=c("EventReminderStateStore").getEventMembers(r.threadID),t=c("EventReminderStateStore").getNumOfGoingMembers(r.threadID),u=c("EventReminderStateStore").getNumOfInterestedMembers(r.threadID),v=c("EventReminderStateStore").getSelfGuestState(r.threadID);return{eventDate:event.eventDate,eventName:event.eventName,eventLocationName:event.eventLocationName,eventMembers:s,eventID:event.eventID,eventType:event.eventType,flyoutEventDate:q?q.flyoutEventDate:event.eventDate*n,flyoutEventName:q?q.flyoutEventName:event.eventName,flyoutEventLocationID:q?q.flyoutEventLocationID:"",flyoutEventLocationName:q?q.flyoutEventLocationName:event.eventLocationName,flyoutEventLocationAddress:q?q.flyoutEventLocationAddress:event.eventLocationAddress,flyoutShown:q?q.flyoutShown:false,isEventLoaded:true,showTimeError:m.NO_ERROR,allowRSVP:event.allowRSVP,numOfGoingMembers:t,numOfInterestedMembers:u,selfGuestState:v}};p.getDefaultState=function(q){var r=c("EventPlanTimeHelper").getDefaultDateTime(q.defaultEventDate);return{eventDate:r/n,eventName:"",eventLocationName:"",eventMembers:[],eventID:"",eventType:c("LightweightEventType").EVENT,flyoutEventDate:r,flyoutEventName:"",flyoutEventLocationID:"",flyoutEventLocationName:"",flyoutEventLocationAddress:"",flyoutShown:false,isEventLoaded:false,showTimeError:m.NO_ERROR,allowRSVP:false,numOfGoingMembers:0,numOfInterestedMembers:0,selfGuestState:l.INVITED}};p.prototype.render=function(){if(this.props.flyoutNoSheet)return c("React").createElement(c("ChatEventReminderFlyout.react"),{isEditing:this.props.isEditing,eventID:this.state.eventID,eventType:this.state.eventType,eventDate:this.state.flyoutEventDate,eventName:this.state.flyoutEventName,eventLocationName:this.state.flyoutEventLocationName,eventLocationAddress:this.state.flyoutEventLocationAddress,eventMembers:this.state.eventMembers,numOfGoingMembers:this.state.numOfGoingMembers,numOfInterestedMembers:this.state.numOfInterestedMembers,selfGuestState:this.state.selfGuestState,onDateTimeChange:this.$ChatEventReminderContainer1,onNameChange:this.$ChatEventReminderContainer2,onLocationChange:this.$ChatEventReminderContainer3,onLocationSelect:this.$ChatEventReminderContainer4,onSelfGuestStateChange:this.$ChatEventReminderContainer5,onDeleteEvent:this.$ChatEventReminderContainer6,onCreateOrChangeEvent:this.$ChatEventReminderContainer7,dialogProps:this.props.dialogProps,threadID:this.props.threadID});return c("React").createElement("span",null,c("React").createElement(c("ChatEventReminderTabSheet.react"),babelHelpers["extends"]({},this.props,{flyoutEventDate:this.state.flyoutEventDate,flyoutEventName:this.state.flyoutEventName,flyoutEventLocationName:this.state.flyoutEventLocationName,flyoutEventLocationAddress:this.state.flyoutEventLocationAddress,eventDate:this.state.eventDate,eventName:this.state.eventName,eventLocationName:this.state.eventLocationName,eventMembers:this.state.eventMembers,allowRSVP:this.state.allowRSVP,numOfGoingMembers:this.state.numOfGoingMembers,numOfInterestedMembers:this.state.numOfInterestedMembers,selfGuestState:this.state.selfGuestState,eventID:this.state.eventID,eventType:this.state.eventType,flyoutShown:this.state.flyoutShown,handleClick:this.$ChatEventReminderContainer8,onToggle:this.$ChatEventReminderContainer9,onDateTimeChange:this.$ChatEventReminderContainer1,onNameChange:this.$ChatEventReminderContainer2,onLocationChange:this.$ChatEventReminderContainer3,onLocationSelect:this.$ChatEventReminderContainer4,onSelfGuestStateChange:this.$ChatEventReminderContainer5,onDeleteEvent:this.$ChatEventReminderContainer6,onCreateOrChangeEvent:this.$ChatEventReminderContainer7,isEventLoaded:this.state.isEventLoaded,tabIndex:0,threadID:this.props.threadID})))};p.prototype.$ChatEventReminderContainer11=function(){var q=c("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID),r=c("XCreateEventReminderController").getURIBuilder().setString("acontext",c("FBJSON").stringify(this.props.actionContext)).setEnum("event_type",c("LightweightEventType").EVENT).setInt("event_time",Math.floor(this.state.flyoutEventDate/n)).setInt("thread_id",q).setString("title",this.state.flyoutEventName).setString("location_id",this.state.flyoutEventLocationID).setString("location_name",this.state.flyoutEventLocationName);new(c("AsyncRequest"))(r.getURI()).setHandler(function(s){if(s.payload){if(this.props.dialogProps&&this.props.dialogProps.onToggle)this.props.dialogProps.onToggle(false);if(s.payload.error)c("SimpleXUIDialog").show(s.payload.error)}}.bind(this)).send()};p.prototype.$ChatEventReminderContainer10=function(){var q=c("XEditEventReminderController").getURIBuilder().setInt("event_reminder_id",this.state.eventID).setString("title",this.state.flyoutEventName).setInt("date",this.state.flyoutEventDate/n).setString("location_id",this.state.flyoutEventLocationID).setString("location_name",this.state.flyoutEventLocationName).setBool("delete",false).setString("acontext",c("FBJSON").stringify(this.props.actionContext));new(c("AsyncRequest"))(q.getURI()).setHandler(function(r){if(r.payload){if(this.props.dialogProps&&this.props.dialogProps.onToggle)this.props.dialogProps.onToggle(false);c("EventReminderActions").updateEventReminder(this.props.threadID,r.payload)}}.bind(this)).send()};f.exports=c("FluxContainer").create(p,{withProps:true})}),null);
__d("FantaEventReminderTabSheet.react",["ChatEventReminderContainer.react","EventsActionsLogger","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.prototype.render=function(){var k={action_history:[{surface:c("EventsActionsLogger").Surface.MESSENGER_CHAT_TAB,mechanism:c("EventsActionsLogger").Mechanism.REMINDER_BANNER}]};return c("React").createElement(c("ChatEventReminderContainer.react"),{threadID:this.props.threadID,flyoutNoSheet:false,isEditing:true,useContextualDialog:true,actionContext:k})};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("ChatEventPlanCTA.react",["cx","fbt","ChatEventReminderContainer.react","EventsActionsLogger","EventPlanStrings","EventRemindersGating","EventReminderActionsLogger","EventReminderRequestHelper","EventReminderStateStore","React","ReactDOM","ShimButton.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m=266;j=babelHelpers.inherits(n,c("React").PureComponent);k=j&&j.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={isEditing:false,showFlyout:false},this.$ChatEventPlanCTA1=function(){__p&&__p();c("EventReminderActionsLogger").logClickOnTriggerCTA();var t=c("EventReminderStateStore").getEvent(this.props.threadID);if(t&&t.exists){this.setState({isEditing:true});if(!this.state.showFlyout)c("EventReminderRequestHelper").fetchEventReminder(this.props.threadID,t.eventID,function(){this.setState({showFlyout:true})}.bind(this));else this.setState({showFlyout:false})}else this.setState({isEditing:false,showFlyout:!this.state.showFlyout})}.bind(this),this.onToggle=function(t){this.setState({showFlyout:t})}.bind(this),p}n.prototype.componentDidMount=function(){c("EventReminderActionsLogger").logViewOnTriggerCTA()};n.prototype.render=function(){var o=c("EventRemindersGating").shouldUseNewName?c("EventPlanStrings").getStartPlanFBT():i._("D\u00e9finir un rappel d\u2019\u00e9v\u00e8nement");return c("React").createElement(c("ShimButton.react"),{className:"_5_65 _1ejy",onClick:this.$ChatEventPlanCTA1,ref:"cta"},o,this.$ChatEventPlanCTA2())};n.prototype.$ChatEventPlanCTA2=function(){if(!this.state.showFlyout)return null;var o="left",p=c("ReactDOM").findDOMNode(this.refs.cta);if(p&&p instanceof Element&&p.getBoundingClientRect().left<m)o="right";var q={alignment:"left",position:o,contextRef:function(){return this}.bind(this),shown:this.state.showFlyout,onToggle:this.onToggle},r={action_history:[{surface:c("EventsActionsLogger").Surface.MESSENGER_CHAT_TAB,mechanism:c("EventsActionsLogger").Mechanism.TRIGGER_CTA}]};return c("React").createElement(c("ChatEventReminderContainer.react"),{actionContext:r,defaultEventDate:this.props.data.timestamp,dialogProps:q,flyoutNoSheet:true,isEditing:this.state.isEditing,threadID:this.props.threadID,useContextualDialog:true})};n.propTypes={threadID:l.string.isRequired,data:l.shape({confidence:l.number.isRequired,name:l.string.isRequired,timestamp:l.number.isRequired}).isRequired};f.exports=n}),null);
__d("ChatEventPlanTriggers.react",["cx","ChatEventReminderContainer.react","EventsActionsLogger","EventReminderActionsLogger","EventReminderRequestHelper","EventReminderStateStore","Link.react","React","ReactDOM"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes,l=266;i=babelHelpers.inherits(m,c("React").PureComponent);j=i&&i.prototype;function m(){__p&&__p();var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.state={isEditing:false,showFlyout:false},this.$ChatEventPlanTriggers1=function(){__p&&__p();c("EventReminderActionsLogger").logClickOnTriggerWord();var s=c("EventReminderStateStore").getEvent(this.props.threadID);if(s&&s.exists){this.setState({isEditing:true});if(!this.state.showFlyout)c("EventReminderRequestHelper").fetchEventReminder(this.props.threadID,s.eventID,function(){this.setState({showFlyout:true})}.bind(this));else this.setState({showFlyout:false})}else this.setState({isEditing:false,showFlyout:!this.state.showFlyout})}.bind(this),this.onToggle=function(s){this.setState({showFlyout:s})}.bind(this),o}m.prototype.componentDidMount=function(){c("EventReminderActionsLogger").logViewOnTriggerWord()};m.prototype.render=function(){return c("React").createElement(c("Link.react"),{className:"_fcj",onClick:this.$ChatEventPlanTriggers1,ref:"trigger_word"},this.props.text,this.$ChatEventPlanTriggers2())};m.prototype.$ChatEventPlanTriggers2=function(){if(!this.state.showFlyout)return null;var n="left",o=c("ReactDOM").findDOMNode(this.refs.trigger_word);if(o&&o instanceof Element&&o.getBoundingClientRect().left<l)n="right";var p={alignment:"left",position:n,contextRef:function(){return this}.bind(this),shown:this.state.showFlyout,onToggle:this.onToggle},q={action_history:[{surface:c("EventsActionsLogger").Surface.MESSENGER_CHAT_TAB,mechanism:c("EventsActionsLogger").Mechanism.TRIGGER_WORD}]};return c("React").createElement(c("ChatEventReminderContainer.react"),{actionContext:q,defaultEventDate:this.props.data.value,dialogProps:p,flyoutNoSheet:true,isEditing:this.state.isEditing,threadID:this.props.threadID,useContextualDialog:true})};m.propTypes={text:k.string.isRequired,threadID:k.string.isRequired,data:k.shape({name:k.string.isRequired,value:k.number.isRequired}).isRequired};f.exports=m}),null);